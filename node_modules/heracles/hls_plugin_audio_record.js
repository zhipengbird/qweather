import { callNative, callNativeKeepCallback } from './hls_plugin_base.js'

const AUDIO_RECORD_MODULE = "audioRecord"

class AudioRecord {
	
    /**
	 * 开始录音
	 * @param {Object} duration - 最大录音时长
	 * @param {Object} needMeter - 是否需要音量大小反馈，可选值
	 * @param {Object} success - 录音成功回调，会多次回调
	 * @param {Object} fail - 录音失败回调
	 * 成功回调事件:
	 *  event: started => 开始录音
	 *         update => 更新进度, 参数meter: 输入音量，如果needMeter传true，duration: 当前录制时长，单位秒
	 *         finish => 完成录制
	 *         interruption => 被其他应用程序事件打断，参数：status: begin/end 
	 */
	record(duration, needMeter, success, fail) {
	  let params = {
		  "duration": duration,
		  "needMeter": needMeter
		}
	   callNativeKeepCallback(AUDIO_RECORD_MODULE,'record',params,"开始录音", success, fail)
	}
	
	/**
	 * 停止录制
	 */
	stop() {
	  return callNative(AUDIO_RECORD_MODULE,'stop',{},"停止录音")
	}
	
	/**
	 * 销毁录音组件
	 */
	destroy() {
		return callNative(AUDIO_RECORD_MODULE,'destroy',{},"释放录音组件")
	}
}

export default AudioRecord;

